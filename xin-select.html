<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="icon/icon.css">
    <style>
        /* ======================= */
        *{
            margin: 0;
            padding: 0;
        }
        body{
            margin: 10px;
            padding-top: 1000px;
            font-family: Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;
        }
        li{
            list-style: none;
        }
        /* ======================= */

        .my-select-wrap{
            display: inline-block;
            min-width: 240px;
            height: 36px;
            position: relative;
        }
        .my-select{
            width: 100%;
            height: 100%;
            position: relative;
            cursor: pointer;
        }
        .my-select .i-triangle{
            width: 35px;
            height: 100%;
            position: absolute;
            top: 0;
            right: 0;
            text-align: center;
            line-height: 36px;
            transform: rotate(0);
            transition: transform .3s;
        }
        .my-select .i-triangle.is-reverse{
            transform: rotate(180deg);
        }
        .my-select input{
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: #fff;
            background-image: none;
            border-radius: 4px;
            border: 1px solid #bfcbd9;
            box-sizing: border-box;
            color: #1f2d3d;
            display: block;
            width: 100%;
            font-size: inherit;
            height: 100%;
            line-height: 1;
            outline: none;
            padding: 3px 10px;
            padding-right: 35px;
            transition: border-color .2s cubic-bezier(.645,.045,.355,1);
            cursor: pointer;
            -moz-user-select: none;
            user-select: none;
        }
        .my-select input:hover{
            border-color: #8391a5;
        }

        .my-option{
            display: none;
            position: absolute;
            z-index: 100;
            width: 100%;
            background-color: #fff;
            box-sizing: border-box;
            border-radius: 4px;
            border: 1px solid #bfcbd9;
            padding: 6px 0;
            max-height: 274px;
            overflow-y: auto;
            transform-origin: center top 0px;
            transform: scaleY(0);
            transition: transform .25s;
            box-shadow: 0 2px 4px rgba(0,0,0,.12), 0 0 6px rgba(0,0,0,.04);
        }
        .my-option li{
            transform: scaleY(0);
            transition: transform .25s;
            transform-origin: center top 0px;
        }

        .my-option.show{
            transform: scaleY(1);
        }
        .my-option.show li{
            transform: scaleY(1);
        }

        .my-option li{
            font-size: 14px;
            padding: 8px 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #48576a;
            height: 36px;
            line-height: 1.5;
            box-sizing: border-box;
            cursor: pointer;
        }
        .my-option li.selected{
            background-color: #20a0ff;
            color: #fff;
        }
        .my-option li.selected:hover{
            background-color: #1c8de0;
        }
        .my-option li:hover{
            background-color: #e4e8f1;
        }
    </style>
</head>
<body style="height: 2000px;">

<span class="my-select-wrap">
    <div class="my-select">
        <input type="text" class="next-year-month" readonly="readonly" placeholder="请选择"/>
        <i class="i-triangle icon-triangle"></i>
    </div>
    <ul class="my-option">
        <li>黄金糕</li>
        <li>龙须面</li>
        <li>北京烤鸭</li>
        <li>京酱肉丝</li>
        <li>炸酱面</li>
        <li>糖醋鲤鱼</li>
        <li>爆炒腰花</li>
        <li>九转大肠</li>
    </ul>
</span>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>
<p><a href="#">aaaaaaaaaa</a></p>


<script src="select/jquery-3.1.1.min.js"></script>
<script>
    console.log( $('.my-option').offset() );
    console.log( $('.my-option').outerWidth() );

    var timer = null;
    $('.my-select').each(function(index, item){
        $(item).prop('isShow', false);
        $(item).find('input').on('valuechange', function(){
            console.log('change');
        });
    });
    $('.my-select').click(function(){
        var $t = $(this);
        var p = $t.parent();
        var on = $t.prop('isShow');
        $('.i-triangle').toggleClass('is-reverse');
        clearTimeout( timer );

        //设置option位置


        if( on === false ){
            p.find('.my-option').show();
            console.log( $('.my-option').offset() );
            timer = setTimeout(function(){
                p.find('.my-option').addClass('show');
            }, 14);

            $(document).off('click');
            $(document).on('click', function(e){
                if( !$( e.target ).parents().hasClass('my-select-wrap') ){
                    $t.trigger('click');
                    $(document).off('click');
                }
            })
        }else{
            $('.my-option').removeClass('show');
            timer = setTimeout(function(){
                p.find('.my-option').hide();
            }, 250);
            $(document).off('click');
        }
        $t.prop('isShow', !on);
    });
    $('.my-option').on('click', 'li', function(){
        var $t = $(this);
        var wrap = $t.parents('.my-select-wrap');
        var input = wrap.find('input');
        var oldValue = wrap.find('input').val();
        var newValue = $t.text();
        $t.siblings().removeClass('selected');
        $t.addClass('selected');
        input.val( $t.text() );

        $('.my-select').trigger('click');

        $(document).off('click');

        if(oldValue !== newValue){
            input.trigger('valuechange');
        }
    });

</script>
</body>
</html>